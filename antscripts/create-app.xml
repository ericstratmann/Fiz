<?xml version="1.0" encoding="UTF-8"?>

<!--
This ant script creates a new Fiz application
-->
<project name="create" default="create" basedir=".">

    <target name="create"
            description="Creates a new Fiz application with a given name">

        <basename property="appname" file="${destdir}"/>

        <!-- Create a directory for the application -->
        <mkdir dir="${destdir}"/>

        <!-- Copy over application specific files -->
        <sync todir="${destdir}" includeemptydirs="true">
            <fileset dir="${fizhome}/app">
                <exclude name="**/antscripts/**"/>
                <exclude name="README"/>
            </fileset>
        </sync>

        <replace file="${destdir}/build.xml"
                 token="@@APPLICATION_NAME" value="${appname}"/>
        
        <copy todir="${destdir}/src">
            <fileset file="${fizhome}/src/log4j.properties" />
        </copy>

        <!-- Create a copy of the app-creating fiz tool -->
        <mkdir dir="${destdir}/fiz"/>
        <copy todir="${destdir}/fiz">
            <fileset dir="${fizhome}">
                <include name="antscripts/**"/>
                <include name="app/**"/>
                <include name="ext/**"/>
                <include name="imageSource/**"/>
                <include name="lib/**"/>
                <include name="out/lib/**"/>
                <include name="src/**"/>
                <include name="shellscripts/**"/>
                <include name="test/**"/>
                <include name="web/**"/>
                <include name="build.xml"/>
            </fileset>
           </copy>

    </target>

</project>