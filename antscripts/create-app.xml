<?xml version="1.0" encoding="UTF-8"?>

<!--
This ant script creates a new Fiz application
-->
<project name="create" default="create" basedir=".">

    <target name="create"
            description="Creates a new Fiz application with a given name">

        <basename property="appname" file="${destdir}"/>

        <!-- Create a directory for the application -->
        <mkdir dir="${destdir}"/>

        <!-- Copy over application specific files -->
        <sync todir="${destdir}" includeemptydirs="true">
            <fileset dir="${fizhome}/app" excludes="README"/>
        </sync>

        <replace file="${destdir}/build.xml"
                 token="@@APPLICATION_NAME" value="${appname}"/>

        <!-- Files that are not application specific -->
        <mkdir dir="${destdir}/javascript/fizlib"/>
        <copy todir="${destdir}/javascript/fizlib">
            <fileset dir="${fizhome}/javascript/fizlib"/>
        </copy>
        
        <mkdir dir="${destdir}/lib"/>
        <copy todir="${destdir}/lib">
            <fileset dir="${fizhome}/lib"/>
        </copy>

        <mkdir dir="${destdir}/src"/>
        <copy todir="${destdir}/src">
            <fileset file="${fizhome}/src/log4j.properties" />
        </copy>

        <mkdir dir="${destdir}/web/fizlib"/>
        <copy todir="${destdir}/web/fizlib">
            <fileset dir="${fizhome}/web/fizlib"/>
        </copy>

        <mkdir dir="${destdir}/web/WEB-INF/fiz"/>
        <copy todir="${destdir}/web/WEB-INF/fiz">
            <fileset dir="${fizhome}/web/WEB-INF/fiz" />
        </copy>

    </target>

</project>